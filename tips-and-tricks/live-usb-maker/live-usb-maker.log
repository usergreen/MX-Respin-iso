=====================================================================
/usr/local/bin/live-usb-maker gui -N -V -C off --from=clone -t /dev/sdb
        program: live-usb-maker
        started: Wed 13 Jul 2022 08:31:34 AM EDT
        version: 2.41.18 (Sat Dec 19 02:26:36 PM MST 2020)
         kernel: 5.10.0-14-amd64
             OS: MX 21.1_minimal (Wildflower)
      found lib: /usr/local/lib/cli-shell-utils/cli-shell-utils.bash
    lib version: 2.41.05 (Tue 05 Nov 2019 08:50:59 PM MST)
---------------------------------------------------------------------

Found man page: live-usb-maker.1
Found live media device /dev/sdc
Will use target device /dev/sdb (3.7G I-O DATA USB_Flash_Disk)
Live boot directory /antiX
Will use source directory /live/boot-dev
Found grub config 2.0
Estimated extfs overhead for 3733M is 7M

                    Total      Used     Extra
   entire drive  3.70 GiB 3.69 GiB     1 MiB
 main partition  3.65 GiB 2.21 GiB  1.43 GiB
 uefi partition    50 MiB   20 MiB    30 MiB

Ready to make live-usb on device sdb
... by cloning directory /live/boot-dev

>> partition-clear
Total bytes: 3967811584
Total blocks: 7749632
 > dd status=none if=/dev/zero of=/dev/sdb bs=512 count=34
 > dd status=none if=/dev/zero of=/dev/sdb bs=512 count=34 seek=64
 > dd status=none conv=notrunc if=/dev/zero of=/dev/sdb bs=512 count=34 seek=7749598
 > partprobe /dev/sdb

>> partition-make
Using msdos partitioning
 > parted --script --align optimal /dev/sdb unit MiB mklabel msdos
 > dd status=none if=/dev/zero of=/dev/sdb seek=1024 bs=1K count=128
 > parted --script --align optimal /dev/sdb unit MiB mkpart primary 1 3733
 > parted --script --align optimal /dev/sdb unit MiB set 1 boot on
 > dd status=none if=/dev/zero of=/dev/sdb seek=3822592 bs=1K count=128
 > parted --script --align optimal /dev/sdb unit MiB mkpart primary 3733 3782
 > parted --script --align optimal /dev/sdb unit MiB set 2 esp on
 > partprobe /dev/sdb
 > wait_for_file /dev/sdb1

>> makefs-bios
 > mkfs.ext4 -O ^64bit -m0 -i16384 -J size=32 /dev/sdb1
mke2fs 1.46.2 (28-Feb-2021)
64-bit filesystem support is not enabled.  The larger fields afforded by this feature enable full-strength checksumming.  Pass -O 64bit to rectify.
Creating filesystem with 955392 4k blocks and 239040 inodes
Filesystem UUID: 9d7ecfbf-e0d6-4e0e-ab8b-1589d06ea4fe
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736

Allocating group tables:  0/30     done                            
Writing inode tables:  0/30     done                            
Creating journal (8192 blocks): done
Writing superblocks and filesystem accounting information:  0/30     done

 > tune2fs -L Live-usb /dev/sdb1
tune2fs 1.46.2 (28-Feb-2021)
 > wait_for_file /dev/sdb2

>> makefs-uefi
 > mkfs.vfat -F 32 -n LIVE-UEFI /dev/sdb2
mkfs.fat 4.2 (2021-01-31)
 > partprobe /dev/sdb
 > wait_for_file /dev/sdb1
 > mkdir -p /run/live-usb-maker/main
 > mount -t ext4 /dev/sdb1 /run/live-usb-maker/main
 > wait_for_file /dev/sdb2
 > mkdir -p /run/live-usb-maker/uefi
 > mount -t vfat /dev/sdb2 /run/live-usb-maker/uefi

Filesystem     Type  Size  Used Avail Use% Mounted on
/dev/sdb1      ext4  3.6G   24K  3.6G   1% /run/live-usb-maker/main
/dev/sdb2      vfat   49M   512   49M   1% /run/live-usb-maker/uefi


>> copy-uefi
copy from iso to uefi partition
files [Ee][Ff][Ii] version
 > cp --no-dereference --preserve=mode,links --recursive /run/live-usb-maker/iso/EFI /run/live-usb-maker/uefi/.
Fix Dell uefi memtest bug
 > cp /run/live-usb-maker/uefi/EFI/BOOT/grubx64.efi /run/live-usb-maker/uefi/EFI/BOOT/fallback.efi

>> copy-main
 > rm -rf /run/live-usb-maker/main/boot.orig
copy from iso to main partition
vm.dirty_bytes = 20000000
copy /antiX/vmlinuz
 > cpio -pdm --quiet /run/live-usb-maker/main/
 > e4defrag -v ./antiX/vmlinuz
e4defrag 1.46.2 (28-Feb-2021)
ext4 defragmentation for ./antiX/vmlinuz
[1/1][79;0H[K[1/1]./antiX/vmlinuz:	100%  extents: 1 -> 1	[ OK ]
 Success:			[1/1]
copy /antiX/initrd.gz
 > cpio -pdm --quiet /run/live-usb-maker/main/
 > e4defrag -v ./antiX/initrd.gz
e4defrag 1.46.2 (28-Feb-2021)
ext4 defragmentation for ./antiX/initrd.gz
[1/1][79;0H[K[1/1]./antiX/initrd.gz:	100%  extents: 1 -> 1	[ OK ]
 Success:			[1/1]
copy remaining files ...
 > cpio -pdm --quiet /run/live-usb-maker/main/
copy pids: 8276 8279
vm.dirty_bytes = 20000000
vm.dirty_ratio = 0
 > write_file /run/live-usb-maker/main/made-by-live-usb-maker   created: Wed 13 Jul 2022 08:35:35 AM EDT
  program: live-usb-maker
  version: 2.41.18 (Sat Dec 19 02:26:36 PM MST 2020)
 > dd status=none if=/dev/urandom of=/run/live-usb-maker/main/antiX/random-seed bs=512 count=1
 > chmod 600 /run/live-usb-maker/main/antiX/random-seed

>> check-usb-md5
check md5 for initrd.gz
 > md5sum -c initrd.gz.md5
initrd.gz: OK
check md5 for linuxfs
 > md5sum -c linuxfs.md5
linuxfs: OK
check md5 for vmlinuz
 > md5sum -c vmlinuz.md5
vmlinuz: OK

>> uuids
Using antiX/MX grub config 2.0
 > mkdir -p /run/live-usb-maker/uefi/boot/grub
 > cp /run/live-usb-maker/main/boot/grub/config/efi-grub.cfg /run/live-usb-maker/uefi/boot/grub/grub.cfg
 > touch /run/live-usb-maker/main/boot/grub/config/did-efi-grub
 > sed -i /^\s*#/! s/%UUID%/9d7ecfbf-e0d6-4e0e-ab8b-1589d06ea4fe/ /run/live-usb-maker/uefi/boot/grub/grub.cfg
 > rm -f /run/live-usb-maker/main/boot/grub/config/*.id
 > touch /run/live-usb-maker/main/boot/grub/config/ff1e3abaf4e5e9f46250c5ad844f6a6e.id
 > sed -i /^\s*#/! s|%ID_FILE%|/boot/grub/config/ff1e3abaf4e5e9f46250c5ad844f6a6e.id| /run/live-usb-maker/uefi/boot/grub/grub.cfg

>> install
extlinux version 6.04
 > dd status=none bs=440 conv=notrunc count=1 if=/usr/lib/syslinux/mbr/mbr.bin of=/dev/sdb
 > rm -f /run/live-usb-maker/main/boot/syslinux/chain.c32
 > rm -f /run/live-usb-maker/main/boot/syslinux/gfxboot.c32
 > rm -f /run/live-usb-maker/main/boot/syslinux/ldlinux.c32
 > rm -f /run/live-usb-maker/main/boot/syslinux/libcom32.c32
 > rm -f /run/live-usb-maker/main/boot/syslinux/libmenu.c32
 > rm -f /run/live-usb-maker/main/boot/syslinux/libutil.c32
 > rm -f /run/live-usb-maker/main/boot/syslinux/menu.c32
 > rm -f /run/live-usb-maker/main/boot/syslinux/syslinux.bin
 > rm -f /run/live-usb-maker/main/boot/syslinux/version
 > cp /usr/lib/syslinux/modules/bios/chain.c32 /run/live-usb-maker/main/boot/syslinux/
 > cp /usr/lib/syslinux/modules/bios/gfxboot.c32 /run/live-usb-maker/main/boot/syslinux/
 > cp /usr/lib/syslinux/modules/bios/vesamenu.c32 /run/live-usb-maker/main/boot/syslinux/
 > cp /usr/lib/syslinux/modules/bios/ldlinux.c32 /run/live-usb-maker/main/boot/syslinux/
 > cp /usr/lib/syslinux/modules/bios/libcom32.c32 /run/live-usb-maker/main/boot/syslinux/
 > cp /usr/lib/syslinux/modules/bios/libmenu.c32 /run/live-usb-maker/main/boot/syslinux/
 > cp /usr/lib/syslinux/modules/bios/libutil.c32 /run/live-usb-maker/main/boot/syslinux/
 > cp /usr/lib/syslinux/modules/bios/linux.c32 /run/live-usb-maker/main/boot/syslinux/
 > cp /usr/lib/syslinux/modules/bios/menu.c32 /run/live-usb-maker/main/boot/syslinux/
 > write_file /run/live-usb-maker/main/boot/syslinux/version 6.04
 > extlinux -i /run/live-usb-maker/main/boot/syslinux
/run/live-usb-maker/main/boot/syslinux is device /dev/sdb1

Filesystem     Type  Size  Used Avail Use% Mounted on
/dev/sdb1      ext4  3.6G  2.3G  1.4G  63% /run/live-usb-maker/main
/dev/sdb2      vfat   49M  5.4M   43M  12% /run/live-usb-maker/uefi

>> done

live-usb-maker took 5 minutes and 9 seconds.

